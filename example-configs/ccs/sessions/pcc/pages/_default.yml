initial_state:
  DISPLAY: encoders
  CURRENT_COLOR: $PART1_COLOR

# To save lots of repetition, allow settings defaults that can be overriden
# on each page.
# This is useful if variables and mappings should stay the same on all pages.
variables:
  SCREEN1: 00
  SCREEN2: 01
  SCREEN3: 02
  SCREEN4: 03
  SCREEN5: 04
  SCREEN6: 05
  SCREEN7: 06
  SCREEN8: 07

  COLOR_OFF: 00

  COLOR_LIGHT_BLUE: 25
  COLOR_RED: 05
  COLOR_YELLOW: 0D
  COLOR_VIOLET: 36
  COLOR_ORANGE: 54
  COLOR_WHITE: 03
  COLOR_GREEN: 15
  COLOR_DARK_BLUE: 28

  PART1_LABEL: Juno 1
  PART2_LABEL: Juno 2
  PART3_LABEL: Juno 3
  PART4_LABEL: Vital
  PART5_LABEL: 
  PART6_LABEL: 
  PART7_LABEL: 
  PART8_LABEL: Mixer

  PART1_COLOR: 25
  PART2_COLOR: 05
  PART3_COLOR: 0D
  PART4_COLOR: 36
  PART5_COLOR: 54
  PART6_COLOR: 03
  PART7_COLOR: 15
  PART8_COLOR: 28

  COLOR1: 25
  COLOR2: 05
  COLOR3: 0D
  COLOR4: 36
  COLOR5: 54
  COLOR6: 03
  COLOR7: 15
  COLOR8: 28

  BUTTON1: 33
  BUTTON2: 34
  BUTTON3: 35
  BUTTON4: 36
  BUTTON5: 37
  BUTTON6: 38
  BUTTON7: 39
  BUTTON8: 3A
  BUTTON9: 3B
  BUTTON10: 3C
  BUTTON11: 3D
  BUTTON12: 3E
  BUTTON13: 3F
  BUTTON14: 40
  BUTTON15: 41
  BUTTON16: 42
  BUTTON17: 43
  BUTTON18: 44
  BUTTON19: 45
  BUTTON20: 46
  BUTTON21: 47
  BUTTON22: 48
  BUTTON23: 49
  BUTTON24: 4A


actions:
  set_selected_part:
    arguments:
      - PART
      - BUTTON
      - COLOR
    actions:
      - conditions:
          $_STATE.DISPLAY.is: encoders
        actions:
        - "[slmk3.set_knob_lower_text_selected:$SCREEN1:00]"
        - "[slmk3.set_knob_lower_text_selected:$SCREEN2:00]"
        - "[slmk3.set_knob_lower_text_selected:$SCREEN3:00]"
        - "[slmk3.set_knob_lower_text_selected:$SCREEN4:00]"
        - "[slmk3.set_knob_lower_text_selected:$SCREEN5:00]"
        - "[slmk3.set_knob_lower_text_selected:$SCREEN6:00]"
        - "[slmk3.set_knob_lower_text_selected:$SCREEN7:00]"
        - "[slmk3.set_knob_lower_text_selected:$SCREEN8:00]"
        - "[slmk3.set_knob_lower_text_selected:$_ARGS.PART:01]"

      - conditions:
          $_STATE.DISPLAY.is: buttons
        actions:
        - "[slmk3.set_bottom_box_selected:$SCREEN1:00]"
        - "[slmk3.set_bottom_box_selected:$SCREEN2:00]"
        - "[slmk3.set_bottom_box_selected:$SCREEN3:00]"
        - "[slmk3.set_bottom_box_selected:$SCREEN4:00]"
        - "[slmk3.set_bottom_box_selected:$SCREEN5:00]"
        - "[slmk3.set_bottom_box_selected:$SCREEN6:00]"
        - "[slmk3.set_bottom_box_selected:$SCREEN7:00]"
        - "[slmk3.set_bottom_box_selected:$SCREEN8:00]"
        - "[slmk3.set_bottom_box_selected:$_ARGS.PART:01]"

      - "[slmk3.set_button_color:$BUTTON1:$COLOR_OFF]"
      - "[slmk3.set_button_color:$BUTTON2:$COLOR_OFF]"
      - "[slmk3.set_button_color:$BUTTON3:$COLOR_OFF]"
      - "[slmk3.set_button_color:$BUTTON4:$COLOR_OFF]"
      - "[slmk3.set_button_color:$BUTTON5:$COLOR_OFF]"
      - "[slmk3.set_button_color:$BUTTON6:$COLOR_OFF]"
      - "[slmk3.set_button_color:$BUTTON7:$COLOR_OFF]"
      - "[slmk3.set_button_color:$BUTTON8:$COLOR_OFF]"
      - "[slmk3.set_button_color:$_ARGS.BUTTON:$_ARGS.COLOR]"

  display_encoders:
    actions:
    - "[slmk3.set_knob_layout]"

    - "[slmk3.set_knob_color:$SCREEN1:$COLOR_WHITE]"
    - "[slmk3.set_knob_color:$SCREEN2:$COLOR_WHITE]"
    - "[slmk3.set_knob_color:$SCREEN3:$COLOR_WHITE]"
    - "[slmk3.set_knob_color:$SCREEN4:$COLOR_WHITE]"
    - "[slmk3.set_knob_color:$SCREEN5:$COLOR_WHITE]"
    - "[slmk3.set_knob_color:$SCREEN6:$COLOR_WHITE]"
    - "[slmk3.set_knob_color:$SCREEN7:$COLOR_WHITE]"
    - "[slmk3.set_knob_color:$SCREEN8:$COLOR_WHITE]"

    - "[slmk3.set_knob_label:$SCREEN1:$ENCODER1_LABEL]"
    - "[slmk3.set_knob_label:$SCREEN2:$ENCODER2_LABEL]"
    - "[slmk3.set_knob_label:$SCREEN3:$ENCODER3_LABEL]"
    - "[slmk3.set_knob_label:$SCREEN4:$ENCODER4_LABEL]"
    - "[slmk3.set_knob_label:$SCREEN5:$ENCODER5_LABEL]"
    - "[slmk3.set_knob_label:$SCREEN6:$ENCODER6_LABEL]"
    - "[slmk3.set_knob_label:$SCREEN7:$ENCODER7_LABEL]"
    - "[slmk3.set_knob_label:$SCREEN8:$ENCODER8_LABEL]"

    - "[slmk3.set_knob_bottom_label:$SCREEN1:$PART1_LABEL]"
    - "[slmk3.set_knob_bottom_label:$SCREEN2:$PART2_LABEL]"
    - "[slmk3.set_knob_bottom_label:$SCREEN3:$PART3_LABEL]"
    - "[slmk3.set_knob_bottom_label:$SCREEN4:$PART4_LABEL]"
    - "[slmk3.set_knob_bottom_label:$SCREEN5:$PART5_LABEL]"
    - "[slmk3.set_knob_bottom_label:$SCREEN6:$PART6_LABEL]"
    - "[slmk3.set_knob_bottom_label:$SCREEN7:$PART7_LABEL]"
    - "[slmk3.set_knob_bottom_label:$SCREEN8:$PART8_LABEL]"

    - "[slmk3.set_knob_bottom_color:$SCREEN1:$PART1_COLOR]"
    - "[slmk3.set_knob_bottom_color:$SCREEN2:$PART2_COLOR]"
    - "[slmk3.set_knob_bottom_color:$SCREEN3:$PART3_COLOR]"
    - "[slmk3.set_knob_bottom_color:$SCREEN4:$PART4_COLOR]"
    - "[slmk3.set_knob_bottom_color:$SCREEN5:$PART5_COLOR]"
    - "[slmk3.set_knob_bottom_color:$SCREEN6:$PART6_COLOR]"
    - "[slmk3.set_knob_bottom_color:$SCREEN7:$PART7_COLOR]"
    - "[slmk3.set_knob_bottom_color:$SCREEN8:$PART8_COLOR]"

    - "[slmk3.set_knob_top_bar_color:$SCREEN1:$_STATE.CURRENT_COLOR]"
    - "[slmk3.set_knob_top_bar_color:$SCREEN2:$_STATE.CURRENT_COLOR]"
    - "[slmk3.set_knob_top_bar_color:$SCREEN3:$_STATE.CURRENT_COLOR]"
    - "[slmk3.set_knob_top_bar_color:$SCREEN4:$_STATE.CURRENT_COLOR]"
    - "[slmk3.set_knob_top_bar_color:$SCREEN5:$_STATE.CURRENT_COLOR]"
    - "[slmk3.set_knob_top_bar_color:$SCREEN6:$_STATE.CURRENT_COLOR]"
    - "[slmk3.set_knob_top_bar_color:$SCREEN7:$_STATE.CURRENT_COLOR]"
    - "[slmk3.set_knob_top_bar_color:$SCREEN8:$_STATE.CURRENT_COLOR]"

    - "[page.set_state:DISPLAY:encoders]"
    - "[page.update_controller_ui]"

  display_buttons:
    actions:
    - "[slmk3.set_box_layout]"
    - "[slmk3.set_top_box_label:$SCREEN1:$BUTTON9_LABEL]"
    - "[slmk3.set_top_box_label:$SCREEN2:$BUTTON10_LABEL]"
    - "[slmk3.set_top_box_label:$SCREEN3:$BUTTON11_LABEL]"
    - "[slmk3.set_top_box_label:$SCREEN4:$BUTTON12_LABEL]"
    - "[slmk3.set_top_box_label:$SCREEN5:$BUTTON13_LABEL]"
    - "[slmk3.set_top_box_label:$SCREEN6:$BUTTON14_LABEL]"
    - "[slmk3.set_top_box_label:$SCREEN7:$BUTTON15_LABEL]"
    - "[slmk3.set_top_box_label:$SCREEN8:$BUTTON16_LABEL]"

    - "[slmk3.set_top_box_color:$SCREEN1:$COLOR1]"
    - "[slmk3.set_top_box_color:$SCREEN2:$COLOR2]"
    - "[slmk3.set_top_box_color:$SCREEN3:$COLOR3]"
    - "[slmk3.set_top_box_color:$SCREEN4:$COLOR4]"
    - "[slmk3.set_top_box_color:$SCREEN5:$COLOR5]"
    - "[slmk3.set_top_box_color:$SCREEN6:$COLOR6]"
    - "[slmk3.set_top_box_color:$SCREEN7:$COLOR7]"
    - "[slmk3.set_top_box_color:$SCREEN8:$COLOR8]"

    - "[slmk3.set_center_box_label:$SCREEN1:$BUTTON17_LABEL]"
    - "[slmk3.set_center_box_label:$SCREEN2:$BUTTON18_LABEL]"
    - "[slmk3.set_center_box_label:$SCREEN3:$BUTTON19_LABEL]"
    - "[slmk3.set_center_box_label:$SCREEN4:$BUTTON20_LABEL]"
    - "[slmk3.set_center_box_label:$SCREEN5:$BUTTON21_LABEL]"
    - "[slmk3.set_center_box_label:$SCREEN6:$BUTTON22_LABEL]"
    - "[slmk3.set_center_box_label:$SCREEN7:$BUTTON23_LABEL]"
    - "[slmk3.set_center_box_label:$SCREEN8:$BUTTON24_LABEL]"

    - "[slmk3.set_center_box_color:$SCREEN1:$COLOR1]"
    - "[slmk3.set_center_box_color:$SCREEN2:$COLOR2]"
    - "[slmk3.set_center_box_color:$SCREEN3:$COLOR3]"
    - "[slmk3.set_center_box_color:$SCREEN4:$COLOR4]"
    - "[slmk3.set_center_box_color:$SCREEN5:$COLOR5]"
    - "[slmk3.set_center_box_color:$SCREEN6:$COLOR6]"
    - "[slmk3.set_center_box_color:$SCREEN7:$COLOR7]"
    - "[slmk3.set_center_box_color:$SCREEN8:$COLOR8]"

    - "[slmk3.set_bottom_box_label:$SCREEN1:$PART1_LABEL]"
    - "[slmk3.set_bottom_box_label:$SCREEN2:$PART2_LABEL]"
    - "[slmk3.set_bottom_box_label:$SCREEN3:$PART3_LABEL]"
    - "[slmk3.set_bottom_box_label:$SCREEN4:$PART4_LABEL]"
    - "[slmk3.set_bottom_box_label:$SCREEN5:$PART5_LABEL]"
    - "[slmk3.set_bottom_box_label:$SCREEN6:$PART6_LABEL]"
    - "[slmk3.set_bottom_box_label:$SCREEN7:$PART7_LABEL]"
    - "[slmk3.set_bottom_box_label:$SCREEN8:$PART8_LABEL]"

    - "[slmk3.set_box_bottom_bar_color:$SCREEN1:$PART1_COLOR]"
    - "[slmk3.set_box_bottom_bar_color:$SCREEN2:$PART1_COLOR]"
    - "[slmk3.set_box_bottom_bar_color:$SCREEN3:$PART1_COLOR]"
    - "[slmk3.set_box_bottom_bar_color:$SCREEN4:$PART4_COLOR]"
    - "[slmk3.set_box_bottom_bar_color:$SCREEN5:$PART5_COLOR]"
    - "[slmk3.set_box_bottom_bar_color:$SCREEN6:$PART6_COLOR]"
    - "[slmk3.set_box_bottom_bar_color:$SCREEN7:$PART7_COLOR]"
    - "[slmk3.set_box_bottom_bar_color:$SCREEN8:$PART8_COLOR]"

    - "[slmk3.set_bottom_box_selected:$SCREEN1:01]"
    - "[slmk3.set_bottom_box_selected:$SCREEN2:00]"
    - "[slmk3.set_bottom_box_selected:$SCREEN3:00]"
    - "[slmk3.set_bottom_box_selected:$SCREEN4:00]"
    - "[slmk3.set_bottom_box_selected:$SCREEN5:00]"
    - "[slmk3.set_bottom_box_selected:$SCREEN6:00]"
    - "[slmk3.set_bottom_box_selected:$SCREEN7:00]"
    - "[slmk3.set_bottom_box_selected:$SCREEN8:00]"

    - "[page.set_state:DISPLAY:buttons]"
    - "[page.update_controller_ui]"


mappings:
  controls:
    slmk3.button1:
      on_press:
        #- conditions:
            #$_STATE.CURRENT_PAGE.isnot: page1
          actions:
            - "[session.load_page:page1]"
            - "[page.set_selected_part:$SCREEN1:$BUTTON1:$PART1_COLOR]"

    slmk3.button2:
      on_press:
        #- conditions:
            #$_STATE.CURRENT_PAGE.isnot: page2
          actions:
            - "[session.load_page:page2]"
            - "[page.set_selected_part:$SCREEN2:$BUTTON2:$PART2_COLOR]"

    slmk3.button_screen_up:
      on_press:
        - conditions:
            $_STATE.DISPLAY.isnot: encoders
          actions:
            - "[page.display_encoders]"

    slmk3.button_right_up:
      on_press:
        - conditions:
            $_STATE.DISPLAY.isnot: buttons
          actions:
            - "[page.display_buttons]"
