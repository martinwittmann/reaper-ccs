extends: _default
name: $PART1_LABEL
id: page1


variables:
  SCREEN_COLUMN: 00
  PAGE_BUTTON: 33
  PAGE_COLOR: 25

  ENCODER1_LABEL: LFO Amt
  ENCODER2_LABEL: PW
  ENCODER3_LABEL: LfoRate
  ENCODER4_LABEL: LfoDel
  ENCODER5_LABEL: FiltEnv
  ENCODER6_LABEL: FiltMod
  ENCODER7_LABEL: FiltKey
  ENCODER8_LABEL: Volume


# To make writing pages easier, they can define their own actions too.
#actions:
  # "page.set_state" is always available as an action and lets you set custom
  # state variables.
  # In each control's action you can optionally define conditions that have to
  # be met for the current action(s) to be triggered.
  # Examples:
  # "[page.set_state:my_name:$MY_VARIABLE]y"
  # "[page.set_state:leds_show:mute]"

  # controls:
  #   button1:
  #     actions:
  #     - "[page.action_always_executed]"
  #     - conditions:
  #         - $_STATE.leds_show.is: mute
  #       actions:
  #       - "[controller.toggle_mute_track1]"



mappings:
  controls:

    slmk3.encoder1:
      mapping: track1.fx1.dco_lfo_value
      on_value_change:
        - conditions:
            $_STATE.DISPLAY.is: encoders
          actions:
            - "[slmk3.sc_set_knob_value:$SCREEN1:$VALUE]"
            - "[slmk3.sc_set_knob_value_label:$SCREEN1:$FORMATTED_VALUE]"
      on_change:
        - conditions:
            $_STATE.DISPLAY.isnot: encoders
          actions:
          - "[page.display_encoders]"

    slmk3.encoder2:
      mapping: track1.fx1.dco_pwm_value
      on_value_change:
        - conditions:
            $_STATE.DISPLAY.is: encoders
          actions:
            - "[slmk3.sc_set_knob_value:$SCREEN2:$VALUE]"
            - "[slmk3.sc_set_knob_value_label:$SCREEN2:$FORMATTED_VALUE]"
      on_change:
        - conditions:
            $_STATE.DISPLAY.isnot: encoders
          actions:
          - "[page.display_encoders]"

    slmk3.encoder3:
      mapping: track1.fx1.lfo_rate
      on_value_change:
        - conditions:
            $_STATE.DISPLAY.is: encoders
          actions:
          - "[slmk3.sc_set_knob_value:$SCREEN3:$VALUE]"
          - "[slmk3.sc_set_knob_value_label:$SCREEN3:$FORMATTED_VALUE]"
      on_change:
        - conditions:
            $_STATE.DISPLAY.isnot: encoders
          actions:
          - "[page.display_encoders]"

    slmk3.encoder4:
      mapping: track1.fx1.lfo_delay
      on_value_change:
        - conditions:
            $_STATE.DISPLAY.is: encoders
          actions:
          - "[slmk3.sc_set_knob_value:$SCREEN4:$VALUE]"
          - "[slmk3.sc_set_knob_value_label:$SCREEN4:$FORMATTED_VALUE]"
      on_change:
        - conditions:
            $_STATE.DISPLAY.isnot: encoders
          actions:
          - "[page.display_encoders]"

    slmk3.encoder5:
      mapping: track1.fx1.filter_env
      on_value_change:
        - conditions:
            $_STATE.DISPLAY.is: encoders
          actions:
          - "[slmk3.sc_set_knob_value:$SCREEN5:$VALUE]"
          - "[slmk3.sc_set_knob_value_label:$SCREEN5:$FORMATTED_VALUE]"
      on_change:
        - conditions:
            $_STATE.DISPLAY.isnot: encoders
          actions:
          - "[page.display_encoders]"

    slmk3.encoder6:
      mapping: track1.fx1.filter_modulation
      on_value_change:
        - conditions:
            $_STATE.DISPLAY.is: encoders
          actions:
          - "[slmk3.sc_set_knob_value:$SCREEN6:$VALUE]"
          - "[slmk3.sc_set_knob_value_label:$SCREEN6:$FORMATTED_VALUE]"
      on_change:
        - conditions:
            $_STATE.DISPLAY.isnot: encoders
          actions:
          - "[page.display_encoders]"

    slmk3.encoder7:
      mapping: track1.fx1.filter_keyboard
      on_value_change:
        - conditions:
            $_STATE.DISPLAY.is: encoders
          actions:
          - "[slmk3.sc_set_knob_value:$SCREEN7:$VALUE]"
          - "[slmk3.sc_set_knob_value_label:$SCREEN7:$FORMATTED_VALUE]"
      on_change:
        - conditions:
            $_STATE.DISPLAY.isnot: encoders
          actions:
          - "[page.display_encoders]"

    slmk3.encoder8:
      mapping: track1.fx1.master_volume
      on_value_change:
        - conditions:
            $_STATE.DISPLAY.is: encoders
          actions:
          - "[slmk3.sc_set_knob_value:$SCREEN8:$VALUE]"
          - "[slmk3.sc_set_knob_value_label:$SCREEN8:$FORMATTED_VALUE]"
      on_change:
        - conditions:
            $_STATE.DISPLAY.isnot: encoders
          actions:
          - "[page.display_encoders]"


    slmk3.button9:
      mapping: track1.fx1.dco_pulse_enabled
      mapping_type: toggle
      on_value_change:
        - conditions:
            $_STATE.DISPLAY.is: buttons
          actions:
            - "[slmk3.sc_set_top_box_value:$SCREEN1:$FORMATTED_VALUE]"
            - conditions:
                $VALUE.is: $MAX_VALUE
              actions:
              - "[slmk3.sc_set_top_box_selected:$SCREEN1:01]"
            - conditions:
                $VALUE.isnot: $MAX_VALUE
              actions:
              - "[slmk3.sc_set_top_box_selected:$SCREEN1:00]"

        - conditions:
            $VALUE.is: $MAX_VALUE
          actions:
          - "[slmk3.set_button_color:$BUTTON9:$COLOR_WHITE]"

        - conditions:
            $VALUE.isnot: $MAX_VALUE
          actions:
          - "[slmk3.set_button_color:$BUTTON9:$COLOR_OFF]"

      on_press:
        - conditions:
            $_STATE.DISPLAY.isnot: buttons
          actions:
          - "[page.display_buttons]"

