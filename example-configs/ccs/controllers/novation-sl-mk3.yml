name: Novation SL MKIII
id: slmk3
default_status: BF
controls:
  encoder1:
    type: relative
    data1: 15

  encoder2:
    type: relative
    data1: 16

  encoder3:
    type: relative
    data1: 17

  encoder4:
    type: relative
    data1: 18

  encoder5:
    type: relative
    data1: 19

  encoder6:
    type: relative
    data1: 1A

  encoder7:
    type: relative
    data1: 1B

  encoder8:
    type: relative
    data1: 1C

  fader1:
    type: absolute
    data1: 29

  fader2:
    type: absolute
    data1: 2A

  fader3:
    type: absolute
    data1: 2B

  fader4:
    type: absolute
    data1: 2C

  fader5:
    type: absolute
    data1: 2D

  fader6:
    type: absolute
    data1: 2E

  fader7:
    type: absolute
    data1: 2F

  fader8:
    type: absolute
    data1: 30

  button1:
    type: button
    data1: 33
    data2_press: 7F
    data2_release: 00

  button2:
    type: button
    data1: 34
    data2_press: 7F
    data2_release: 00

  button3:
    type: button
    data1: 35
    data2_press: 7F
    data2_release: 00

  button4:
    type: button
    data1: 36
    data2_press: 7F
    data2_release: 00

  button5:
    type: button
    data1: 37
    data2_press: 7F
    data2_release: 00

  button6:
    type: button
    data1: 38
    data2_press: 7F
    data2_release: 00

  button7:
    type: button
    data1: 39
    data2_press: 7F
    data2_release: 00

  button8:
    type: button
    data1: 3A
    data2_press: 7F
    data2_release: 00

  button9:
    type: button
    data1: 3B
    data2_press: 7F
    data2_release: 00

  button10:
    type: button
    data1: 3C
    data2_press: 7F
    data2_release: 00

  button11:
    type: button
    data1: 3D
    data2_press: 7F
    data2_release: 00

  button12:
    type: button
    data1: 3E
    data2_press: 7F
    data2_release: 00

  button13:
    type: button
    data1: 3F
    data2_press: 7F
    data2_release: 00

  button14:
    type: button
    data1: 40
    data2_press: 7F
    data2_release: 00

  button15:
    type: button
    data1: 41
    data2_press: 7F
    data2_release: 00

  button16:
    type: button
    data1: 42
    data2_press: 7F
    data2_release: 00

  button17:
    type: button
    data1: 43
    data2_press: 7F
    data2_release: 00

  button18:
    type: button
    data1: 44
    data2_press: 7F
    data2_release: 00

  button19:
    type: button
    data1: 45
    data2_press: 7F
    data2_release: 00

  button20:
    type: button
    data1: 46
    data2_press: 7F
    data2_release: 00

  button21:
    type: button
    data1: 47
    data2_press: 7F
    data2_release: 00

  button22:
    type: button
    data1: 48
    data2_press: 7F
    data2_release: 00

  button23:
    type: button
    data1: 49
    data2_press: 7F
    data2_release: 00

  button24:
    type: button
    data1: 4A
    data2_press: 7F
    data2_release: 00

  button_screen_up:
    type: button
    data1: 51
    data2_press: 7F
    data2_release: 00

  button_screen_down:
    type: button
    data1: 52
    data2_press: 7F
    data2_release: 00

  button_right_up:
    type: button
    data1: 57
    data2_press: 7F
    data2_release: 00

  button_right_down:
    type: button
    data1: 58
    data2_press: 7F
    data2_release: 00


variables:
  SYSEX_HEADER: F0 00 20 29 02 0A 01
  SYSEX_END: F7

  SCREEN1: 00
  SCREEN2: 01
  SCREEN3: 02
  SCREEN4: 03
  SCREEN5: 04
  SCREEN6: 05
  SCREEN7: 06
  SCREEN8: 07
  CENTER_SCREEN: 08

  SET_SCREEN_LAYOUT: 01
  SET_SCREEN_PROPERTY: 02

  PROPERTY_TYPE_TEXT: 01
  PROPERTY_TYPE_COLOR: 02
  PROPERTY_TYPE_VALUE: 03
  PROPERTY_TYPE_RGB: 04

  LAYOUT_EMPTY: 00
  L_EMPTY: 00
  # To make things less verbose, let's use l_ instead of layout_

  # Documentation says there are not properties that can be set, but when
  # testing things it seemed like we can set text for 1 lines.
  # What else could be possible?


  LABEL_KNOB: 00
  LABEL_KNOB_VALUE: 01



  LAYOUT_KNOB: 01
  L_KNOB: 01

  L_KNOB_TOP_BAR_COLOR: 00
  L_KNOB_KNOB_COLOR: 01
  L_KNOB_BOTTOM_BAR_COLOR: 02
  L_KNOB_TEXT1: 00
  L_KNOB_TEXT2: 01
  L_KNOB_TEXT3: 02
  L_KNOB_TEXT4: 03

  L_KNOB_VALUE: 00

  # If set to 1 the bottom bar color is used as text background color.
  L_KNOB_LOWER_TEXT_SELECTED: 01

  LAYOUT_BOX: 02
  L_BOX: 02
  L_BOX_TOP_BOX_COLOR: 00
  L_BOX_CENTER_BOX_COLOR: 01
  L_BOX_BOTTOM_BAR_COLOR: 02

  L_BOX_TOP_BOX_SELECTED: 0
  L_BOX_CENTER_BOX_SELECTED: 1
  L_BOX_BOTTOM_BOX_SELECTED: 2

  L_BOX_TEXT1: 00
  L_BOX_TEXT2: 01
  L_BOX_TEXT3: 02
  L_BOX_TEXT4: 03
  L_BOX_TEXT5: 04
  L_BOX_TEXT6: 05

  CENTER_L_LEFT_BAR_COLOR: 00
  CENTER_L_TOP_RIGHT_BAR_COLOR: 01
  CENTER_L_BOTTOM_RIGHT_BAR_COLOR: 01

  CENTER_L_LEFT_TOP_TEXT: 00
  CENTER_L_LEFT_BOTTOM_TEXT: 01
  CENTER_L_RIGHT_TOP_TEXT: 02
  CENTER_L_RIGHT_BOTTOM_TEXT: 03

  COLOR_WHITE: 03
  COLOR_RED: 05
  COLOR_YELLOW: 0D
  COLOR_GREEN: 15
  COLOR_LIGHT_BLUE: 25
  COLOR_DARK_BLUE: 27
  COLOR_VIOLET: 2D
  COLOR_ORANGE: 3C


actions:
  start_screen_change:
    message:
      - $SYSEX_HEADER
      - $SET_SCREEN_PROPERTY

  end_screen_change:
    message:
      - $SYSEX_END

  set_knob_layout:
    message:
      - $SYSEX_HEADER
      - $SET_SCREEN_LAYOUT
      - $LAYOUT_KNOB
      - $SYSEX_END

  # Yes, setting a value of 01 disables them, and 00 enables them.
  disable_keyboard_leds:
    message:
      - $SYSEX_HEADER
      - 05
      - 01
      - $SYSEX_END

  enable_keyboard_leds:
    message:
      - $SYSEX_HEADER
      - 05
      - 00
      - $SYSEX_END

  sc_set_knob_label:
    arguments:
      - SCREEN_COLUMN
      - TEXT!
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_TEXT
      - $L_KNOB_TEXT1
      - $_ARGS.TEXT

  sc_set_knob_value_label:
    arguments:
      - SCREEN_COLUMN
      - VALUE!
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_TEXT
      - $L_KNOB_TEXT2
      - $_ARGS.VALUE

  sc_set_knob_value:
    arguments:
      - SCREEN_COLUMN
      - VALUE
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_VALUE
      - $L_KNOB_VALUE
      - $_ARGS.VALUE

  sc_set_knob_color:
    arguments:
      - SCREEN_COLUMN
      - COLOR
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_COLOR
      - $L_KNOB_KNOB_COLOR
      - $_ARGS.COLOR

  sc_set_knob_bottom_label:
    arguments:
      - SCREEN_COLUMN
      - TEXT!
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_TEXT
      - $L_KNOB_TEXT4
      - $_ARGS.TEXT

  sc_set_knob_lower_text_selected:
    arguments:
      - SCREEN_COLUMN
      - SELECTED
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_VALUE
      - $L_KNOB_LOWER_TEXT_SELECTED
      - $_ARGS.SELECTED

  sc_set_knob_top_bar_color:
    arguments:
      - SCREEN_COLUMN
      - COLOR
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_COLOR
      - $L_KNOB_TOP_BAR_COLOR
      - $_ARGS.COLOR

  sc_set_knob_bottom_color:
    arguments:
      - SCREEN_COLUMN
      - COLOR
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_COLOR
      - $L_KNOB_BOTTOM_BAR_COLOR
      - $_ARGS.COLOR

  set_box_layout:
    message:
      - $SYSEX_HEADER
      - $SET_SCREEN_LAYOUT
      - $LAYOUT_BOX
      - $SYSEX_END

  sc_set_top_box_label:
    arguments:
      - SCREEN_COLUMN
      - TEXT!
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_TEXT
      - $L_BOX_TEXT1
      - $_ARGS.TEXT

  sc_set_top_box_value:
    arguments:
      - SCREEN_COLUMN
      - TEXT!
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_TEXT
      - $L_BOX_TEXT2
      - $_ARGS.TEXT

  sc_set_center_box_label:
    arguments:
      - SCREEN_COLUMN
      - TEXT!
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_TEXT
      - $L_BOX_TEXT3
      - $_ARGS.TEXT

  sc_set_center_box_value:
    arguments:
      - SCREEN_COLUMN
      - TEXT!
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_TEXT
      - $L_BOX_TEXT4
      - $_ARGS.TEXT

  sc_set_bottom_box_label:
    arguments:
      - SCREEN_COLUMN
      - TEXT!
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_TEXT
      - $L_BOX_TEXT6
      - $_ARGS.TEXT

  set_button_color:
    arguments:
      - BUTTON
      - COLOR
    message:
      - BF
      - $_ARGS.BUTTON
      - $_ARGS.COLOR

  sc_set_box_bottom_bar_color:
    arguments:
      - SCREEN_COLUMN
      - COLOR
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_COLOR
      - $L_BOX_BOTTOM_BAR_COLOR
      - $_ARGS.COLOR

  sc_set_top_box_color:
    arguments:
      - SCREEN_COLUMN
      - COLOR
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_COLOR
      - $L_BOX_TOP_BOX_COLOR
      - $_ARGS.COLOR

  sc_set_top_box_selected:
    arguments:
      - SCREEN_COLUMN
      - SELECTED
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_VALUE
      - $L_BOX_TOP_BOX_SELECTED
      - $_ARGS.SELECTED

  sc_set_center_box_color:
    arguments:
      - SCREEN_COLUMN
      - COLOR
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_COLOR
      - $L_BOX_CENTER_BOX_COLOR
      - $_ARGS.COLOR

  sc_set_center_box_selected:
    arguments:
      - SCREEN_COLUMN
      - SELECTED
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_VALUE
      - $L_BOX_CENTER_BOX_SELECTED
      - $_ARGS.SELECTED

  sc_set_bottom_box_color:
    arguments:
      - SCREEN_COLUMN
      - COLOR
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_COLOR
      - $L_BOX_BOTTOM_BOX_COLOR
      - $_ARGS.COLOR

  sc_set_bottom_box_selected:
    arguments:
      - SCREEN_COLUMN
      - SELECTED
    message:
      - $_ARGS.SCREEN_COLUMN
      - $PROPERTY_TYPE_VALUE
      - $L_BOX_BOTTOM_BOX_SELECTED
      - $_ARGS.SELECTED

  set_fader_color:
    arguments:
      - FADER
      - COLOR
    message:
      - BF
      - $_ARGS.FADER
      - $_ARGS.COLOR

  sc_set_center_screen_right_bar_color:
    arguments:
      - BAR
      - COLOR
    message:
      - $CENTER_SCREEN
      - $PROPERTY_TYPE_COLOR
      - $_ARGS.BAR
      - $_ARGS.COLOR
